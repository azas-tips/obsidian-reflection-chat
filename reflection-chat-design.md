# Reflection Chat - Obsidian Plugin è¨­è¨ˆæ›¸

## 1. æ¦‚è¦

### 1.1 ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¦‚è¦

ã€ŒReflection Chatã€ã¯ã€AIã‚³ãƒ¼ãƒã¨ã®å¯¾è©±ã‚’é€šã˜ã¦ã‚»ãƒ«ãƒ•ã‚³ãƒ¼ãƒãƒ³ã‚°ã‚’è¡Œã„ã€è‡ªåˆ†ã ã‘ã®ã€Œãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ»ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚°ãƒ©ãƒ•ã€ã‚’æ§‹ç¯‰ã™ã‚‹Obsidianãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚‹ã€‚

ä¼æ¥­ã«ãŠã‘ã‚‹ã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ»ã‚°ãƒ©ãƒ•ã€ï¼ˆæ„æ€æ±ºå®šã®ç—•è·¡ã‚’è¨˜éŒ²ã—ã€æ¤œç´¢å¯èƒ½ã«ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã®æ¦‚å¿µã‚’å€‹äººå‘ã‘ã«é©ç”¨ã€‚éå»ã®æ„æ€æ±ºå®šãƒ»ä¾¡å€¤è¦³ãƒ»æ€è€ƒãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è“„ç©ã—ã€AIã‚³ãƒ¼ãƒãŒãã‚Œã‚‰ã‚’å‚ç…§ã—ãªãŒã‚‰è³ªå•ã™ã‚‹ã“ã¨ã§ã€è‡ªå·±ç†è§£ã¨æ„æ€æ±ºå®šã®è³ªã‚’é«˜ã‚ã‚‹ã€‚

ã‚³ãƒ¼ãƒã¯ä¼šè©±ã®æ–‡è„ˆã‹ã‚‰å°‚é–€æ€§ï¼ˆã‚­ãƒ£ãƒªã‚¢ã€é–¢ä¿‚æ€§ã€ã‚¦ã‚§ãƒ«ãƒã‚¹ç­‰ï¼‰ã‚’è‡ªå‹•åˆ¤æ–­ã—ã€é©åˆ‡ãªè¦–ç‚¹ã§æ·±æ˜ã‚Šã‚’è¡Œã†ã€‚

### 1.2 è§£æ±ºã™ã‚‹èª²é¡Œ

- æ—¥è¨˜ã‚’æ›¸ãç¿’æ…£ãŒç¶šã‹ãªã„ï¼ˆæ§‹é€ åŒ–ã®è² æ‹…ï¼‰
- éå»ã®è‡ªåˆ†ãŒä½•ã‚’è€ƒãˆã¦ã„ãŸã‹æ€ã„å‡ºã›ãªã„
- ä¼¼ãŸã‚ˆã†ãªåˆ¤æ–­ã‚’ä½•åº¦ã‚‚è¿·ã†ï¼ˆå‰ä¾‹ã®ä¸åœ¨ï¼‰
- æ„æ€æ±ºå®šã®ç†ç”±ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ãªã„

### 1.3 ã‚³ã‚¢æ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ |
|------|------|
| AIã‚³ãƒ¼ãƒãƒ³ã‚° | æ–‡è„ˆã«å¿œã˜ãŸå°‚é–€æ€§ã§ã‚»ãƒ«ãƒ•ã‚³ãƒ¼ãƒãƒ³ã‚°ã‚’æ”¯æ´ |
| è‡ªå‹•ã‚¿ã‚°ãƒ»åˆ†é¡ | ä¼šè©±å†…å®¹ã‹ã‚‰ãƒ†ãƒ¼ãƒï¼ˆæŒ¯ã‚Šè¿”ã‚Šã€èª­æ›¸ã€ä¼šè­°ç­‰ï¼‰ã‚’è‡ªå‹•åˆ¤å®š |
| è‡ªå‹•æ§‹é€ åŒ– | ä¼šè©±ã‹ã‚‰è¦ç´„ãƒ»ã‚¿ã‚°ãƒ»æ„æ€æ±ºå®šãƒ»ä¾¡å€¤è¦³ã‚’æŠ½å‡º |
| æ–‡è„ˆæ¤œç´¢ | éå»ã®é¡ä¼¼ã—ãŸè©±é¡Œãƒ»æ„æ€æ±ºå®šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è‡ªå‹•å‚ç…§ |
| ä¾¡å€¤è¦³ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚° | ç¹°ã‚Šè¿”ã—ç¾ã‚Œã‚‹åˆ¤æ–­è»¸ã‚„ä¾¡å€¤è¦³ã‚’è“„ç©ãƒ»å¯è¦–åŒ– |
| ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è‡ªå‹•ç”Ÿæˆ | ä¼šè©±ä¸­ã®äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»æ›¸ç±ã‚’æ¤œå‡ºã—ã€ãƒãƒ¼ãƒˆã‚’è‡ªå‹•ä½œæˆ |
| é–¢ä¿‚æ€§æŠ½å‡º | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®é–¢ä¿‚ï¼ˆä¸Šå¸ãƒ»éƒ¨ä¸‹ã€è‘—è€…ãªã©ï¼‰ã‚’è‡ªå‹•æ¤œå‡º |
| ãƒãƒ¼ãƒˆä¿å­˜ | ãƒ†ãƒ¼ãƒã«å¿œã˜ãŸãƒ•ã‚©ãƒ«ãƒ€ã«è‡ªå‹•ä¿å­˜ |

### 1.4 å¯¾è±¡ç’°å¢ƒ

- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: PC (Windows / macOS / Linux)
- **Obsidian ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.4.0ä»¥ä¸Š
- **Node.js**: 22ä»¥ä¸Šï¼ˆé–‹ç™ºæ™‚ï¼‰

â€» ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œã¯å°†æ¥æ¤œè¨ï¼ˆPhase 2ä»¥é™ï¼‰

---

## 2. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Obsidian Vault                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Reflection Chat Plugin                   â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Presentation Layer                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  Chat View  â”‚  â”‚  Settings   â”‚  â”‚  Commands   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  (å³ãƒ‘ãƒãƒ«)  â”‚  â”‚    Tab      â”‚  â”‚             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                             â”‚                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                   Application Layer                 â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    Chat     â”‚  â”‚   Context   â”‚  â”‚   Session   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Engine    â”‚  â”‚  Retriever  â”‚  â”‚   Manager   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚                             â”‚                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚                 Infrastructure Layer                â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  OpenRouter â”‚  â”‚   Vectra    â”‚  â”‚   Embedder  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Client    â”‚  â”‚    Store    â”‚  â”‚  (ruri-v3)  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                                     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚    Note     â”‚  â”‚      Obsidian Vault API     â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   Indexer   â”‚  â”‚                             â”‚   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      Vault Files                        â”‚    â”‚
â”‚  â”‚  ğŸ“ journal/          ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒˆï¼ˆè‡ªå‹•ã‚¿ã‚°åˆ†é¡ï¼‰    â”‚    â”‚
â”‚  â”‚  ğŸ“ entities/         äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»æ›¸ç±ãƒ»é–¢ä¿‚æ€§    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            .obsidian/plugins/reflection-chat/            â”‚    â”‚
â”‚  â”‚  ğŸ“„ data.json         è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«                       â”‚    â”‚
â”‚  â”‚  ğŸ“ vectors/          Vectraã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹                 â”‚    â”‚
â”‚  â”‚  ğŸ“ models/           ruri-v3ãƒ¢ãƒ‡ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              â”‚
                              â–¼ HTTPS
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    OpenRouter     â”‚
                    â”‚       API         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ãƒ¬ã‚¤ãƒ¤ãƒ¼è²¬å‹™

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | è²¬å‹™ |
|---------|------|
| Presentation | UIæç”»ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›å‡¦ç†ã€è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ |
| Application | ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè£… |
| Infrastructure | å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã€ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– |

---

## 3. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

### 3.1 Presentation Layer

#### 3.1.1 ChatView

ãƒãƒ£ãƒƒãƒˆUIã‚’æä¾›ã™ã‚‹å³ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ Reflection Chat                            [âš™ï¸]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  ğŸ¤– ä»Šæ—¥ã¯ã©ã‚“ãªä¸€æ—¥ã ã£ãŸï¼Ÿ                         â”‚
â”‚                                                     â”‚
â”‚  ğŸ‘¤ å‰¯æ¥­ã®è©±ãŒæ¥ãŸã€‚å—ã‘ã‚‹ã‹è¿·ã£ã¦ã‚‹                  â”‚
â”‚                                                     â”‚
â”‚  ğŸ¤– å‰¯æ¥­ã‹ã€‚ã©ã‚“ãªå†…å®¹ï¼Ÿ                             â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ“ é–¢é€£ã™ã‚‹éå»                              â”‚   â”‚
â”‚  â”‚ â”œ ğŸ“ 2025-06-15 é€±æœ«è¬›å¸«ã®æ–­ã‚Š              â”‚   â”‚
â”‚  â”‚ â”œ ğŸ“ 2025-03-22 ã‚­ãƒ£ãƒªã‚¢ã®å„ªå…ˆé †ä½          â”‚   â”‚
â”‚  â”‚ â”” ğŸ‘¤ [[ç”°ä¸­éƒ¨é•·]]                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å…¥åŠ›æ¬„...                            ] [é€ä¿¡]      â”‚
â”‚                                                     â”‚
â”‚ [ğŸ“ ä¿å­˜ã—ã¦çµ‚äº†]  [ğŸ” éå»ã‚’æ¤œç´¢]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è²¬å‹™**:
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¡¨ç¤ºï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ / Botï¼‰
- ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®é€æ¬¡ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®ç®¡ç†
- é–¢é€£ãƒãƒ¼ãƒˆãƒ‘ãƒãƒ«ã®è¡¨ç¤º
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ãƒœã‚¿ãƒ³ã®å‡¦ç†

**ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°è¡¨ç¤º**:
```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ› â†’ é€ä¿¡
2. ç©ºã®Botãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ ã‚’ä½œæˆ
3. chunkã‚’å—ä¿¡ã™ã‚‹ãŸã³ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ ã«è¿½è¨˜
4. [DONE]å—ä¿¡ã§å®Œäº†ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¿½åŠ 
```

**Obsidian APIä½¿ç”¨**:
- `ItemView` ã‚’ç¶™æ‰¿
- `WorkspaceLeaf` ã§å³ãƒ‘ãƒãƒ«ã«é…ç½®

#### 3.1.2 SettingsTab

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®šç”»é¢ã€‚Obsidianã® `PluginSettingTab` ã‚’ç¶™æ‰¿ã—ã¦å®Ÿè£…ã€‚

**è¨­å®šé …ç›®**:

| ã‚«ãƒ†ã‚´ãƒª | é …ç›® | å‹ | UI | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|---------|------|-----|-----|-----------|
| API | OpenRouter API Key | string | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› | "" |
| API | å¯¾è©±ãƒ¢ãƒ‡ãƒ« | string | ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ | "anthropic/claude-sonnet-4.5" |
| API | è¦ç´„ãƒ¢ãƒ‡ãƒ« | string | ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ | "anthropic/claude-haiku-4.5" |
| ãƒ•ã‚©ãƒ«ãƒ€ | ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜å…ˆ | string | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | "journal" |
| ãƒ•ã‚©ãƒ«ãƒ€ | ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ | string | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | "entities" |
| æ–‡è„ˆ | ç›´è¿‘å‚ç…§æ—¥æ•° | number | ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ | 7 |
| æ–‡è„ˆ | é¡ä¼¼æ¤œç´¢ä»¶æ•° | number | ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ | 5 |
| ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | string | ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ | (å¾Œè¿°) |

**è¨­å®šç”»é¢ã‚¤ãƒ¡ãƒ¼ã‚¸**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reflection Chat è¨­å®š                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ ğŸ”‘ APIè¨­å®š                                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ OpenRouter API Key                                          â”‚
â”‚ [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢] [ãƒ†ã‚¹ãƒˆæ¥ç¶š]                   â”‚
â”‚                                                             â”‚
â”‚ å¯¾è©±ãƒ¢ãƒ‡ãƒ«                                                  â”‚
â”‚ [â–¼ anthropic/claude-sonnet-4.5          ]                  â”‚
â”‚   â”œ claude-sonnet-4.5 (streaming âœ“)                        â”‚
â”‚   â”œ claude-haiku-4.5 (streaming âœ“)                         â”‚
â”‚   â”œ gpt-4o (streaming âœ“)                                   â”‚
â”‚   â”” ...                                                    â”‚
â”‚                                                             â”‚
â”‚ è¦ç´„ãƒ¢ãƒ‡ãƒ«                                                  â”‚
â”‚ [â–¼ anthropic/claude-haiku-4.5           ]                  â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€è¨­å®š                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜å…ˆ: [journal        ]                         â”‚
â”‚ ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£:     [entities       ]                         â”‚
â”‚                                                             â”‚
â”‚ ğŸ” æ–‡è„ˆè¨­å®š                                                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ç›´è¿‘å‚ç…§æ—¥æ•°:  [â”â”â”â”â”â—â”â”â”â”] 7æ—¥                              â”‚
â”‚ é¡ä¼¼æ¤œç´¢ä»¶æ•°:  [â”â”â”â—â”â”â”â”â”â”] 5ä»¶                              â”‚
â”‚                                                             â”‚
â”‚ ğŸ“ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ                                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ã‚ãªãŸã¯ç§å°‚å±ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚³ãƒ¼ãƒå…¼æ€è€ƒãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã§ã™ã€‚  â”‚ â”‚
â”‚ â”‚ ...                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™]                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¢ãƒ‡ãƒ«é¸æŠã®å‹•ä½œ**:
1. API Keyå…¥åŠ›æ™‚ã« `fetchModels()` ã‚’å‘¼ã³å‡ºã—
2. Streamingå¯¾å¿œãƒ¢ãƒ‡ãƒ«ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆã¾ãŸã¯å¯¾å¿œãƒãƒ¼ã‚¯è¡¨ç¤ºï¼‰
3. ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§é¸æŠå¯èƒ½ã«

#### 3.1.3 Commands

ç™»éŒ²ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚

| ã‚³ãƒãƒ³ãƒ‰ID | åå‰ | å‹•ä½œ |
|-----------|------|------|
| open-chat | ãƒãƒ£ãƒƒãƒˆã‚’é–‹ã | ChatViewã‚’å³ãƒ‘ãƒãƒ«ã§é–‹ã |
| reindex-notes | ãƒãƒ¼ãƒˆã‚’å†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | å…¨å¯¾è±¡ãƒãƒ¼ãƒˆã‚’embedding |
| search-past | éå»ã‚’æ¤œç´¢ | æ¤œç´¢ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã |

---

### 3.2 Application Layer

#### 3.2.1 ChatEngine

LLMã¨ã®å¯¾è©±ã‚’ç®¡ç†ã€‚

**è²¬å‹™**:
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰ï¼ˆã‚·ã‚¹ãƒ†ãƒ  + ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ + ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- OpenRouter APIå‘¼ã³å‡ºã—ï¼ˆã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒ‘ãƒ¼ã‚¹
- è¦ç´„ç”Ÿæˆï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ï¼‰

**ãƒ¡ã‚½ãƒƒãƒ‰**:
| ãƒ¡ã‚½ãƒƒãƒ‰ | å…¥åŠ› | å‡ºåŠ› | èª¬æ˜ |
|---------|------|------|------|
| chatStream | messages, context, onChunk | void | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã§å¯¾è©±å¿œç­”ã‚’ç”Ÿæˆ |
| generateSummary | messages | SessionSummary | ä¼šè©±ã‚’è¦ç´„ãƒ»æ§‹é€ åŒ–ï¼ˆéã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰ |

**ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡¦ç†**:
```typescript
chatStream(messages, context, onChunk: (chunk: string) => void): void {
  // 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
  // 2. OpenRouterClient.stream() å‘¼ã³å‡ºã—
  // 3. chunkã”ã¨ã«onChunkã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œ
  //    â†’ ChatViewãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§UIã‚’æ›´æ–°
}
```

**ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹é€ **:
```
[System Prompt]
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- æ–‡è„ˆæƒ…å ±ï¼ˆç›´è¿‘ãƒãƒ¼ãƒˆã€é¡ä¼¼ãƒãƒ¼ãƒˆã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼‰
- æŒ¯ã‚‹èˆã„æŒ‡ç¤º

[Messages]
- user: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™ºè¨€
- assistant: Botå¿œç­”
- ...ï¼ˆä¼šè©±å±¥æ­´ï¼‰
```

#### 3.2.2 ContextRetriever

ä¼šè©±ã«é–¢é€£ã™ã‚‹æ–‡è„ˆæƒ…å ±ã‚’åé›†ã€‚

**è²¬å‹™**:
- 3å±¤ã®æ–‡è„ˆå–å¾—ï¼ˆæ™‚é–“ / æ„å‘³ / ãƒªãƒ³ã‚¯ï¼‰
- é‡è¤‡æ’é™¤
- å„ªå…ˆåº¦ä»˜ã‘

**æ–‡è„ˆå–å¾—ã®3å±¤**:

```
Layer 1: æ™‚é–“ãƒ™ãƒ¼ã‚¹
â”œâ”€ ç›´è¿‘Næ—¥é–“ã®æŒ¯ã‚Šè¿”ã‚Šãƒãƒ¼ãƒˆ
â”œâ”€ ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°æ—¥æ™‚ã§ãƒ•ã‚£ãƒ«ã‚¿
â””â”€ æœ€å¤§10ä»¶

Layer 2: æ„å‘³ãƒ™ãƒ¼ã‚¹ï¼ˆãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ï¼‰
â”œâ”€ ç¾åœ¨ã®ç™ºè¨€ + ç›´è¿‘3ç™ºè¨€ã‚’ã‚¯ã‚¨ãƒªåŒ–
â”œâ”€ ruri-v3ã§embeddingç”Ÿæˆ
â”œâ”€ Vectraã§é¡ä¼¼æ¤œç´¢
â””â”€ Top-Nä»¶ã‚’å–å¾—

Layer 3: ãƒªãƒ³ã‚¯ãƒ™ãƒ¼ã‚¹
â”œâ”€ ä¼šè©±ä¸­ã®[[ãƒªãƒ³ã‚¯]]ã‚’æ­£è¦è¡¨ç¾ã§æŠ½å‡º
â”œâ”€ entities/ãƒ•ã‚©ãƒ«ãƒ€ã‹ã‚‰è©²å½“ãƒãƒ¼ãƒˆå–å¾—
â””â”€ äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è£œè¶³æƒ…å ±
```

**ãƒ¡ã‚½ãƒƒãƒ‰**:
| ãƒ¡ã‚½ãƒƒãƒ‰ | å…¥åŠ› | å‡ºåŠ› |
|---------|------|------|
| retrieve | currentMessage, history | ConversationContext |

#### 3.2.3 SessionManager

ä¼šè©±ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ã€‚

**è²¬å‹™**:
- ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ / çµ‚äº†
- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è¿½åŠ 
- ãƒãƒ¼ãƒˆã¸ã®ä¿å­˜
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ

**ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹**:
```
Session {
  id: UUID
  startedAt: timestamp
  messages: Message[]
  context: ConversationContext
}
```

**ä¿å­˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**:
```markdown
---
date: 2025-12-27
type: session
tags: [career, decision-pending]
---

# 2025-12-27 ã‚»ãƒƒã‚·ãƒ§ãƒ³

## 21:30

### è¦ç´„
å‰¯æ¥­ã®ã‚ªãƒ•ã‚¡ãƒ¼ã«ã¤ã„ã¦æ¤œè¨ã€‚é€±10æ™‚é–“ã§æœˆ15ä¸‡ã®ã‚³ãƒ³ã‚µãƒ«æ¡ˆä»¶ã€‚
ã‚„ã‚ŠãŒã„ã¨è² è·ã®ãƒãƒ©ãƒ³ã‚¹ã§æ‚©ã‚“ã§ã„ã‚‹ã€‚

### ã‚¿ã‚°
#career #decision-pending #å‰¯æ¥­

### æ¤œè¨ä¸­ã®æ„æ€æ±ºå®š
- å‰¯æ¥­ã‚ªãƒ•ã‚¡ãƒ¼ã‚’å—ã‘ã‚‹ã‹ã©ã†ã‹

### æ°—ã¥ã
- å‰å›ã®è»¢è·æ™‚ã¨åŒã˜ãã€Œæ™‚é–“ vs åå…¥ã€ã®è»¸ã§æ‚©ã‚“ã§ã„ã‚‹

<details>
<summary>ä¼šè©±ãƒ­ã‚°</summary>

**Bot**: ä»Šæ—¥ã¯ã©ã‚“ãªä¸€æ—¥ã ã£ãŸï¼Ÿ

**è‡ªåˆ†**: å‰¯æ¥­ã®è©±ãŒæ¥ãŸã€‚å—ã‘ã‚‹ã‹è¿·ã£ã¦ã‚‹

**Bot**: å‰¯æ¥­ã‹ã€‚ã©ã‚“ãªå†…å®¹ï¼Ÿ

...

</details>
```

**ãƒ¡ã‚½ãƒƒãƒ‰**:
| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| startSession() | æ–°ã—ã„ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ |
| addMessage(message) | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«è¿½åŠ  |
| saveSession() | ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ãƒãƒ¼ãƒˆã¨ã—ã¦ä¿å­˜ |
| createEntityNotes(entities) | æŠ½å‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‹ã‚‰ãƒãƒ¼ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ |

**ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£è‡ªå‹•ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯**:
```
createEntityNotes(entities: ExtractedEntity[]):
  for each entity in entities:
    1. entities/ãƒ•ã‚©ãƒ«ãƒ€ã«åŒåãƒãƒ¼ãƒˆãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
    2. å­˜åœ¨ã—ãªã„å ´åˆã®ã¿æ–°è¦ä½œæˆ
    3. å­˜åœ¨ã™ã‚‹å ´åˆã¯ã€Œé–¢é€£ã™ã‚‹æŒ¯ã‚Šè¿”ã‚Šã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ãƒªãƒ³ã‚¯è¿½è¨˜
```

---

### 3.3 Infrastructure Layer

#### 3.3.1 OpenRouterClient

OpenRouter APIã¨ã®é€šä¿¡ã‚’æ‹…å½“ã€‚

**è²¬å‹™**:
- APIèªè¨¼
- ãƒªã‚¯ã‚¨ã‚¹ãƒˆé€ä¿¡ï¼ˆé€šå¸¸ / ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ‘ãƒ¼ã‚¹
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ãƒªãƒˆãƒ©ã‚¤å‡¦ç†

**APIä»•æ§˜**:
- ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ: `https://openrouter.ai/api/v1/chat/completions`
- èªè¨¼: Bearer Token
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: OpenAIäº’æ›

**å¿…é ˆãƒ˜ãƒƒãƒ€ãƒ¼**:
| ãƒ˜ãƒƒãƒ€ãƒ¼ | å€¤ |
|---------|-----|
| Authorization | Bearer {API_KEY} |
| Content-Type | application/json |
| HTTP-Referer | https://github.com/{repo} |
| X-Title | Reflection Chat |

**ãƒ¡ã‚½ãƒƒãƒ‰**:
| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| complete(messages, options) | é€šå¸¸ã®APIå‘¼ã³å‡ºã—ï¼ˆè¦ç´„ç”Ÿæˆç”¨ï¼‰ |
| stream(messages, options, onChunk) | ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‘¼ã³å‡ºã—ï¼ˆãƒãƒ£ãƒƒãƒˆç”¨ï¼‰ |
| fetchModels() | åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ä¸€è¦§ã‚’å–å¾— |

**ãƒ¢ãƒ‡ãƒ«ä¸€è¦§å–å¾—**:
```typescript
// GET https://openrouter.ai/api/v1/models
// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹
{
  "data": [
    {
      "id": "anthropic/claude-sonnet-4.5",
      "name": "Claude Sonnet 4.5",
      "context_length": 200000,
      "pricing": { "prompt": "0.000003", "completion": "0.000015" },
      "supported_parameters": ["stream", "temperature", ...] // streamå¯¾å¿œç¢ºèª
    },
    ...
  ]
}
```

**ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ**:
```typescript
// ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
{
  model: "anthropic/claude-sonnet-4.5",
  messages: [...],
  stream: true  // ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æœ‰åŠ¹åŒ–
}

// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆServer-Sent Eventså½¢å¼ï¼‰
data: {"choices":[{"delta":{"content":"ä»Šæ—¥"}}]}
data: {"choices":[{"delta":{"content":"ã¯"}}]}
data: {"choices":[{"delta":{"content":"ã©ã‚“ãª"}}]}
...
data: [DONE]
```

**ãƒ¢ãƒ‡ãƒ«æŒ‡å®šä¾‹**:
| ç”¨é€” | ãƒ¢ãƒ‡ãƒ«ID |
|------|---------|
| å¯¾è©± | anthropic/claude-sonnet-4.5 |
| è¦ç´„ | anthropic/claude-haiku-4.5 |
| è»½é‡ | openai/gpt-4o-mini |

#### 3.3.2 Embedder

ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã‚’æ‹…å½“ã€‚

**è²¬å‹™**:
- ãƒ¢ãƒ‡ãƒ«ã®ãƒ­ãƒ¼ãƒ‰ï¼ˆåˆå›ã®ã¿ï¼‰
- ãƒ†ã‚­ã‚¹ãƒˆã®embeddingç”Ÿæˆ
- Prefixä»˜ä¸ï¼ˆã‚¯ã‚¨ãƒª / æ–‡ç« ï¼‰

**ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«**:
| é …ç›® | å€¤ |
|------|-----|
| ãƒ¢ãƒ‡ãƒ« | sirasagi62/ruri-v3-30m-ONNX |
| ãƒ™ãƒ¼ã‚¹ | ModernBERT-jaï¼ˆåå¤å±‹å¤§å­¦ï¼‰ |
| æ¬¡å…ƒæ•° | 256 |
| ã‚µã‚¤ã‚º | ç´„37MBï¼ˆint8é‡å­åŒ–ï¼‰ |
| æœ€å¤§é•· | 8192ãƒˆãƒ¼ã‚¯ãƒ³ |

**Prefixæ–¹å¼**:
- çŸ­ã„ãƒ†ã‚­ã‚¹ãƒˆï¼ˆã‚¯ã‚¨ãƒªï¼‰: `ã‚¯ã‚¨ãƒª: {text}`
- é•·ã„ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ–‡æ›¸ï¼‰: `æ–‡ç« : {text}`

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®å®‰**:
| é …ç›® | å€¤ |
|------|-----|
| åˆå›ãƒ­ãƒ¼ãƒ‰ | 2-3ç§’ |
| embeddingç”Ÿæˆ | 50-100ms / ãƒ†ã‚­ã‚¹ãƒˆ |

#### 3.3.3 VectorStore

Vectraã‚’ä½¿ç”¨ã—ãŸãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†ã€‚

**è²¬å‹™**:
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®åˆæœŸåŒ–
- ãƒ™ã‚¯ãƒˆãƒ«ã®è¿½åŠ  / æ›´æ–° / å‰Šé™¤
- é¡ä¼¼æ¤œç´¢

**ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**:
- å½¢å¼: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ï¼ˆJSONï¼‰
- å ´æ‰€: `.obsidian/plugins/reflection-chat/vectors/`

**ãƒ¡ã‚½ãƒƒãƒ‰**:
| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| initialize() | ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹åˆæœŸåŒ– |
| upsert(id, vector, metadata) | ãƒ™ã‚¯ãƒˆãƒ«è¿½åŠ /æ›´æ–° |
| search(queryVector, limit, filter?) | é¡ä¼¼æ¤œç´¢ |
| delete(id) | ãƒ™ã‚¯ãƒˆãƒ«å‰Šé™¤ |

**ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```typescript
{
  path: string       // ãƒãƒ¼ãƒˆã®ãƒ‘ã‚¹
  title: string      // ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«
  date: string       // æ—¥ä»˜ (YYYY-MM-DD)
  summary: string    // è¦ç´„ï¼ˆæœ€åˆã®500æ–‡å­—ï¼‰
  tags: string[]     // ã‚¿ã‚°
  category: string   // ã‚«ãƒ†ã‚´ãƒªï¼ˆcareer, reading, etc.ï¼‰
  type: 'session' | 'entity'
}
```

#### 3.3.4 NoteIndexer

ãƒãƒ¼ãƒˆã®ç›£è¦–ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°ã€‚

**è²¬å‹™**:
- å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€ã®ç›£è¦–
- ãƒãƒ¼ãƒˆä¿å­˜æ™‚ã®è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- å…¨ãƒãƒ¼ãƒˆå†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

**ç›£è¦–å¯¾è±¡**:
- `{journalFolder}/**/*.md`
- `{entitiesFolder}/**/*.md`

**ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†**:
| ã‚¤ãƒ™ãƒ³ãƒˆ | å‡¦ç† |
|---------|------|
| create | embeddingç”Ÿæˆ â†’ Vectraã«è¿½åŠ  |
| modify | embeddingå†ç”Ÿæˆ â†’ Vectraã‚’æ›´æ–° |
| delete | Vectraã‹ã‚‰å‰Šé™¤ |
| rename | æ—§ãƒ‘ã‚¹å‰Šé™¤ â†’ æ–°ãƒ‘ã‚¹ã§è¿½åŠ  |

---

## 4. ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### 4.1 å‹å®šç¾©

```typescript
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
interface Message {
  id: string
  role: 'user' | 'assistant'
  content: string
  timestamp: number
}

// ä¼šè©±ã‚»ãƒƒã‚·ãƒ§ãƒ³
interface Session {
  id: string
  startedAt: number
  messages: Message[]
  context: ConversationContext
}

// æ–‡è„ˆæƒ…å ±
interface ConversationContext {
  recentNotes: NoteSummary[]      // ç›´è¿‘ã®æŒ¯ã‚Šè¿”ã‚Š
  semanticMatches: SearchResult[] // æ„å‘³çš„ã«é–¢é€£
  linkedEntities: Entity[]        // äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
}

// ãƒãƒ¼ãƒˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
interface NoteSummary {
  path: string
  title: string
  date: string
  summary: string
  tags: string[]                  // LLMãŒè‡ªå‹•ç”Ÿæˆã—ãŸã‚¿ã‚°
  category: string                // è‡ªå‹•åˆ¤å®šã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªï¼ˆå¾Œè¿°ï¼‰
  type: 'session' | 'entity'      // ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒˆ or ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒ¼ãƒˆ
}

// ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢çµæœ
interface SearchResult {
  id: string
  score: number
  metadata: NoteSummary
}

// ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆäººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»æ›¸ç±ç­‰ï¼‰
interface Entity {
  name: string
  type: 'person' | 'project' | 'company' | 'book' | 'other'
  description: string
  path: string
}

// ã‚»ãƒƒã‚·ãƒ§ãƒ³è¦ç´„
interface SessionSummary {
  summary: string
  tags: string[]                // è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸã‚¿ã‚°
  category: string              // è‡ªå‹•åˆ¤å®šã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªï¼ˆå¾Œè¿°ï¼‰
  decisions: string[]
  insights: string[]
  entities: ExtractedEntity[]   // æŠ½å‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆè‡ªå‹•ç”Ÿæˆå¯¾è±¡ï¼‰
  relations: EntityRelation[]   // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®é–¢ä¿‚æ€§
  values: ValueMention[]        // è¨€åŠã•ã‚ŒãŸä¾¡å€¤è¦³ãƒ»åˆ¤æ–­è»¸
}

// ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®é–¢ä¿‚
interface EntityRelation {
  from: string                  // ä¸»ä½“ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å
  to: string                    // å¯¾è±¡ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å
  type: string                  // é–¢ä¿‚ã®ç¨®é¡ï¼ˆä¸Šå¸ã€éƒ¨ä¸‹ã€è‘—è€…ã€æ‰€å±ãªã©ï¼‰
  description?: string          // é–¢ä¿‚ã®è©³ç´°èª¬æ˜
}

// æŠ½å‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
interface ExtractedEntity {
  name: string                  // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£åï¼ˆä¾‹: "ç”°ä¸­éƒ¨é•·", "Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ", "7ã¤ã®ç¿’æ…£"ï¼‰
  type: 'person' | 'project' | 'company' | 'book' | 'other'
  description: string           // ä¼šè©±ã‹ã‚‰æ¨æ¸¬ã•ã‚Œã‚‹ç°¡å˜ãªèª¬æ˜
  context: string               // ã©ã†ã„ã†æ–‡è„ˆã§è¨€åŠã•ã‚ŒãŸã‹
}

// ä¾¡å€¤è¦³ãƒ»åˆ¤æ–­è»¸
interface ValueMention {
  value: string                 // ä¾¡å€¤è¦³ã®åå‰ï¼ˆä¾‹: "æ™‚é–“ã®è‡ªç”±", "çµŒæ¸ˆçš„å®‰å®š"ï¼‰
  context: string               // ã©ã†ã„ã†æ–‡è„ˆã§è¨€åŠã•ã‚ŒãŸã‹
  sentiment: 'positive' | 'negative' | 'conflicted'  // ãã®ä¾¡å€¤è¦³ã¸ã®æ…‹åº¦
}

// è“„ç©ã•ã‚ŒãŸä¾¡å€¤è¦³ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
interface ValueProfile {
  name: string                  // ä¾¡å€¤è¦³ã®åå‰
  frequency: number             // è¨€åŠå›æ•°
  firstMentioned: string        // åˆå‡ºæ—¥
  lastMentioned: string         // æœ€çµ‚è¨€åŠæ—¥
  relatedDecisions: string[]    // é–¢é€£ã™ã‚‹æ„æ€æ±ºå®š
  tensions: string[]            // å¯¾ç«‹ã—ãŒã¡ãªä»–ã®ä¾¡å€¤è¦³
}

// ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š
interface PluginSettings {
  // API
  openRouterApiKey: string
  chatModel: string
  summaryModel: string

  // ãƒ•ã‚©ãƒ«ãƒ€
  journalFolder: string           // ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒˆä¿å­˜å…ˆ
  entitiesFolder: string          // ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒ¼ãƒˆä¿å­˜å…ˆ

  // æ–‡è„ˆ
  contextWindowDays: number
  maxSemanticResults: number

  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
  systemPrompt: string            // çµ±åˆã•ã‚ŒãŸã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

  // ãã®ä»–
  autoIndex: boolean
}
```

### 4.2 ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒˆ (journal/)

LLMãŒä¼šè©±å†…å®¹ã‹ã‚‰è‡ªå‹•çš„ã«ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¿ã‚°ã‚’åˆ¤å®šã—ã€çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ä¿å­˜ã€‚

```markdown
---
date: 2025-12-27
type: session
category: career          # LLMãŒè‡ªå‹•åˆ¤å®šï¼ˆå¾Œè¿°ï¼‰
tags: [å‰¯æ¥­, æ„æ€æ±ºå®š, ã‚­ãƒ£ãƒªã‚¢]
entities: [ç”°ä¸­éƒ¨é•·, Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ]
---

# 2025-12-27 21:30

## è¦ç´„
{LLMãŒç”Ÿæˆã—ãŸè¦ç´„}

## ã‚¿ã‚°
#career #å‰¯æ¥­ #æ„æ€æ±ºå®š

## æ¤œè¨ä¸­ã®æ„æ€æ±ºå®š
- {æ±ºå®šäº‹é …ãŒã‚ã‚Œã°}

## æ°—ã¥ã
- {æ°—ã¥ããŒã‚ã‚Œã°}

## è¨€åŠã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£
- [[ç”°ä¸­éƒ¨é•·]] - ä¸Šå¸ã€å‰¯æ¥­ã«ã¤ã„ã¦ç›¸è«‡
- [[Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ]] - ç¾åœ¨ã®ä¸»æ‹…å½“

<details>
<summary>ä¼šè©±ãƒ­ã‚°</summary>

**Bot**: {ç™ºè¨€}

**è‡ªåˆ†**: {ç™ºè¨€}

...

</details>
```

**ã‚«ãƒ†ã‚´ãƒªä¸€è¦§ï¼ˆLLMãŒè‡ªå‹•åˆ¤å®šï¼‰**:

| ã‚«ãƒ†ã‚´ãƒª | èª¬æ˜ | ä¾‹ |
|---------|------|-----|
| career | ä»•äº‹ã€ã‚­ãƒ£ãƒªã‚¢ã€è»¢è·ã€å‰¯æ¥­ | æ˜‡é€²ã®æ‚©ã¿ã€è»¢è·æ¤œè¨ |
| relationship | äººé–“é–¢ä¿‚ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ | ä¸Šå¸ã¨ã®é–¢ä¿‚ã€å®¶æ—ã®è©± |
| wellness | å¥åº·ã€ç¿’æ…£ã€ãƒ¡ãƒ³ã‚¿ãƒ« | é‹å‹•ç¿’æ…£ã€ã‚¹ãƒˆãƒ¬ã‚¹ |
| creative | å‰µä½œã€å­¦ç¿’ã€ã‚¹ã‚­ãƒ« | æ–°ã—ã„æŠ€è¡“ã®å­¦ç¿’ |
| financial | ãŠé‡‘ã€æŠ•è³‡ã€è³‡ç”£ | æŠ•è³‡åˆ¤æ–­ã€å®¶è¨ˆ |
| reading | èª­æ›¸ã€æ›¸ç±ã®å†…å®¹ | æœ¬ã®æ„Ÿæƒ³ã€å­¦ã³ |
| idea | ã‚¢ã‚¤ãƒ‡ã‚¢ã€ã²ã‚‰ã‚ã | æ–°è¦äº‹æ¥­æ¡ˆ |
| project | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ¯ã‚Šè¿”ã‚Š | é€²æ—ç¢ºèªã€èª²é¡Œ |
| life | äººç”Ÿã€ä¾¡å€¤è¦³å…¨èˆ¬ | å°†æ¥ã®æ–¹å‘æ€§ |

#### ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒãƒ¼ãƒˆ (entities/)

```markdown
---
type: entity
entity_type: person | project | company | book
---

# ç”°ä¸­éƒ¨é•·

## æ¦‚è¦
{äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»æ›¸ç±ã®ç°¡å˜ãªèª¬æ˜}

## é–¢ä¿‚æ€§
- [[è‡ªåˆ†]] â† ä¸Šå¸
- [[Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ]] â†’ è²¬ä»»è€…
- [[å–¶æ¥­éƒ¨]] â†’ æ‰€å±

## ãƒ¡ãƒ¢
- {é–¢é€£ã™ã‚‹æƒ…å ±}

## é–¢é€£ã™ã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³
- [[2025-12-27]] - å‰¯æ¥­ã«ã¤ã„ã¦ç›¸è«‡
- [[2025-12-20]] - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—ã®å ±å‘Š
```

**é–¢ä¿‚æ€§ã®è¨˜æ³•**:
- `[[A]] â† é–¢ä¿‚ `: ã€Œã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯ A ã® é–¢ä¿‚ ã§ã‚ã‚‹ã€ï¼ˆä¾‹: ç”°ä¸­éƒ¨é•·ã¯è‡ªåˆ†ã®ä¸Šå¸ï¼‰
- `[[A]] â†’ é–¢ä¿‚ `: ã€Œã“ã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã¯ A ã«å¯¾ã—ã¦ é–¢ä¿‚ ã§ã‚ã‚‹ã€ï¼ˆä¾‹: ç”°ä¸­éƒ¨é•·ã¯Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è²¬ä»»è€…ï¼‰

**æ›¸ç±ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ä¾‹**:

```markdown
---
type: entity
entity_type: book
author: "ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ãƒ³ãƒ»Rãƒ»ã‚³ãƒ´ã‚£ãƒ¼"
---

# 7ã¤ã®ç¿’æ…£

## æ¦‚è¦
å€‹äººã¨çµ„ç¹”ã®åŠ¹æœæ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã®7ã¤ã®ç¿’æ…£ã‚’è§£èª¬ã—ãŸãƒ“ã‚¸ãƒã‚¹æ›¸ã€‚

## é–¢ä¿‚æ€§
- [[ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ãƒ³ãƒ»Rãƒ»ã‚³ãƒ´ã‚£ãƒ¼]] â† è‘—è€…
- [[è‡ªå·±å•“ç™º]] â†’ ã‚«ãƒ†ã‚´ãƒª

## ãƒ¡ãƒ¢
- ç¬¬1ã€œ3ã®ç¿’æ…£: ç§çš„æˆåŠŸï¼ˆä¾å­˜ã‹ã‚‰è‡ªç«‹ã¸ï¼‰
- ç¬¬4ã€œ6ã®ç¿’æ…£: å…¬çš„æˆåŠŸï¼ˆè‡ªç«‹ã‹ã‚‰ç›¸äº’ä¾å­˜ã¸ï¼‰
- ç¬¬7ã®ç¿’æ…£: å†æ–°å†ç”Ÿï¼ˆåˆƒã‚’ç ”ãï¼‰

## é–¢é€£ã™ã‚‹ã‚»ãƒƒã‚·ãƒ§ãƒ³
- [[2025-12-27]] - ç¬¬1ã®ç¿’æ…£ã«ã¤ã„ã¦
- [[2025-12-20]] - èª­ã¿å§‹ã‚
```

---

## 5. å‡¦ç†ãƒ•ãƒ­ãƒ¼

### 5.1 ãƒãƒ£ãƒƒãƒˆé€ä¿¡ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¦ãƒ¼ã‚¶ãƒ¼  â”‚
â”‚ å…¥åŠ›     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatView.sendMessage()                                       â”‚
â”‚ 1. å…¥åŠ›å€¤ã‚’å–å¾—                                              â”‚
â”‚ 2. UIã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º                                â”‚
â”‚ 3. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º                                          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ContextRetriever.retrieve()                                  â”‚
â”‚ 1. ç›´è¿‘Næ—¥ã®ãƒãƒ¼ãƒˆå–å¾—ï¼ˆæ™‚é–“ãƒ™ãƒ¼ã‚¹ï¼‰                         â”‚
â”‚ 2. Embedder.embedQuery() ã§ã‚¯ã‚¨ãƒªã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–               â”‚
â”‚ 3. VectorStore.search() ã§é¡ä¼¼ãƒãƒ¼ãƒˆæ¤œç´¢                    â”‚
â”‚ 4. ä¼šè©±ä¸­ã®[[ãƒªãƒ³ã‚¯]]ã‹ã‚‰ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å–å¾—                    â”‚
â”‚ 5. ConversationContext ã‚’è¿”ã™                               â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatEngine.chatStream()                                      â”‚
â”‚ 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰ï¼ˆè¨­å®š + ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰              â”‚
â”‚ 2. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´æ•´å½¢                                        â”‚
â”‚ 3. OpenRouterClient.stream() ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°é–‹å§‹           â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼ (chunkã”ã¨ã«ç¹°ã‚Šè¿”ã—)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatView.onChunk(chunk)                                      â”‚
â”‚ 1. Botãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ ã« chunk ã‚’è¿½è¨˜                            â”‚
â”‚ 2. è‡ªå‹•ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«                                            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼ ([DONE]å—ä¿¡æ™‚)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatView.onComplete()                                        â”‚
â”‚ 1. ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°çµ‚äº†å‡¦ç†                                    â”‚
â”‚ 2. é–¢é€£ãƒãƒ¼ãƒˆãƒ‘ãƒãƒ«æ›´æ–°                                      â”‚
â”‚ 3. SessionManager.addMessage() ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³æ›´æ–°             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã€Œä¿å­˜ã—ã¦   â”‚
â”‚  çµ‚äº†ã€ã‚¯ãƒªãƒƒã‚¯â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionManager.saveSession()                                 â”‚
â”‚ 1. ç¾åœ¨ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—                                    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ChatEngine.generateSummary()                                 â”‚
â”‚ 1. ä¼šè©±å±¥æ­´ã‚’è¦ç´„ãƒ¢ãƒ‡ãƒ«ã«é€ä¿¡                                â”‚
â”‚ 2. JSONå½¢å¼ã§æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—                              â”‚
â”‚    - summary: è¦ç´„æ–‡                                         â”‚
â”‚    - tags: ã‚¿ã‚°é…åˆ—                                          â”‚
â”‚    - decisions: æ„æ€æ±ºå®šé…åˆ—                                 â”‚
â”‚    - insights: æ°—ã¥ãé…åˆ—                                    â”‚
â”‚    - entities: æŠ½å‡ºã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ï¼ˆåå‰ã€ã‚¿ã‚¤ãƒ—ã€èª¬æ˜ï¼‰  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionManager.formatNote()                                  â”‚
â”‚ 1. Markdownãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«æ•´å½¢                                â”‚
â”‚ 2. ä¼šè©±ãƒ­ã‚°ã‚’<details>ã§æŠ˜ã‚ŠãŸãŸã¿                          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vaultæ“ä½œ                                                    â”‚
â”‚ 1. Daily Note ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª                               â”‚
â”‚    - å­˜åœ¨ã™ã‚‹: æœ«å°¾ã«è¿½è¨˜                                    â”‚
â”‚    - å­˜åœ¨ã—ãªã„: æ–°è¦ä½œæˆ                                    â”‚
â”‚ 2. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜                                              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionManager.createEntityNotes()                           â”‚
â”‚ 1. æŠ½å‡ºã•ã‚ŒãŸå„ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã«ã¤ã„ã¦ãƒ«ãƒ¼ãƒ—:                   â”‚
â”‚    a. entities/{name}.md ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª                   â”‚
â”‚    b. å­˜åœ¨ã—ãªã„å ´åˆ:                                        â”‚
â”‚       - ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‹ã‚‰ãƒãƒ¼ãƒˆç”Ÿæˆ                           â”‚
â”‚       - type, description, context ã‚’è¨˜è¼‰                   â”‚
â”‚       - ã€Œé–¢é€£ã™ã‚‹æŒ¯ã‚Šè¿”ã‚Šã€ã«ä»Šæ—¥ã®ãƒªãƒ³ã‚¯è¿½åŠ               â”‚
â”‚    c. å­˜åœ¨ã™ã‚‹å ´åˆ:                                          â”‚
â”‚       - ã€Œé–¢é€£ã™ã‚‹æŒ¯ã‚Šè¿”ã‚Šã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«è¿½è¨˜                â”‚
â”‚ 2. ä½œæˆ/æ›´æ–°ã•ã‚ŒãŸã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ä¸€è¦§ã‚’è¿”ã™                    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NoteIndexer (è‡ªå‹•ãƒˆãƒªã‚¬ãƒ¼)                                   â”‚
â”‚ 1. ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´ã‚’æ¤œçŸ¥                                        â”‚
â”‚ 2. Embedder.embedDocument() ã§ãƒ™ã‚¯ãƒˆãƒ«åŒ–                    â”‚
â”‚ 3. VectorStore.upsert() ã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–°                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.3 ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³èµ·å‹•   â”‚
â”‚ ã¾ãŸã¯           â”‚
â”‚ ã€Œå†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NoteIndexer.indexAll()                                       â”‚
â”‚ 1. å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã®å…¨.mdãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—                     â”‚
â”‚ 2. å„ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ãƒ«ãƒ¼ãƒ—:                                 â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼ (å„ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NoteIndexer.indexFile()                                      â”‚
â”‚ 1. ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’èª­ã¿è¾¼ã¿                                    â”‚
â”‚ 2. Frontmatterã‚’ãƒ‘ãƒ¼ã‚¹                                       â”‚
â”‚ 3. æœ¬æ–‡ã‹ã‚‰ã‚µãƒãƒªãƒ¼æŠ½å‡ºï¼ˆæœ€åˆã®500æ–‡å­—ï¼‰                     â”‚
â”‚ 4. ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¿ã‚°æŠ½å‡ºï¼ˆ#tagå½¢å¼ï¼‰                            â”‚
â”‚ 5. NoteSummary ã‚’æ§‹ç¯‰                                        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Embedder.embedDocument()                                     â”‚
â”‚ 1. ã€Œæ–‡ç« : {title}\n{summary}\n{tags}ã€ã‚’æ§‹ç¯‰               â”‚
â”‚ 2. ruri-v3 ã§embeddingç”Ÿæˆï¼ˆ256æ¬¡å…ƒï¼‰                       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VectorStore.upsert()                                         â”‚
â”‚ 1. ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’IDã¨ã—ã¦ç™»éŒ²                                â”‚
â”‚ 2. ãƒ™ã‚¯ãƒˆãƒ« + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
obsidian-reflection-chat/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts                     # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ types.ts                    # å‹å®šç¾©
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/                         # Presentation Layer
â”‚   â”‚   â”œâ”€â”€ ChatView.ts             # ãƒãƒ£ãƒƒãƒˆUI
â”‚   â”‚   â”œâ”€â”€ SettingsTab.ts          # è¨­å®šç”»é¢
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â”œâ”€â”€ MessageList.ts      # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¦§
â”‚   â”‚       â”œâ”€â”€ InputArea.ts        # å…¥åŠ›ã‚¨ãƒªã‚¢
â”‚   â”‚       â””â”€â”€ RelatedNotesPanel.ts # é–¢é€£ãƒãƒ¼ãƒˆãƒ‘ãƒãƒ«
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                       # Application Layer
â”‚   â”‚   â”œâ”€â”€ ChatEngine.ts           # LLMå¯¾è©±ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ContextRetriever.ts     # æ–‡è„ˆå–å¾—
â”‚   â”‚   â””â”€â”€ SessionManager.ts       # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ infrastructure/             # Infrastructure Layer
â”‚   â”‚   â”œâ”€â”€ OpenRouterClient.ts     # OpenRouter API
â”‚   â”‚   â”œâ”€â”€ Embedder.ts             # ruri-v3 embedding
â”‚   â”‚   â”œâ”€â”€ VectorStore.ts          # Vectra wrapper
â”‚   â”‚   â””â”€â”€ NoteIndexer.ts          # ãƒãƒ¼ãƒˆç›£è¦–ãƒ»ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ parser.ts               # Markdown/Frontmatterè§£æ
â”‚       â”œâ”€â”€ templates.ts            # ãƒãƒ¼ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚       â””â”€â”€ logger.ts               # ãƒ­ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚
â”œâ”€â”€ styles.css                      # ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
â”œâ”€â”€ manifest.json                   # Obsidianãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ esbuild.config.mjs              # ãƒ“ãƒ«ãƒ‰è¨­å®š
â””â”€â”€ README.md
```

---

## 7. å¤–éƒ¨ä¾å­˜

### 7.1 npm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----------|-----------|------|
| obsidian | ^1.4.0 | Obsidian APIï¼ˆdevDependencyï¼‰ |
| vectra | ^0.4.0 | ãƒ­ãƒ¼ã‚«ãƒ«ãƒ™ã‚¯ãƒˆãƒ«DB |
| @huggingface/transformers | ^3.0.0 | Transformers.js (ONNXæ¨è«–) |

### 7.2 å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | èªè¨¼ |
|---------|------|------|
| OpenRouter | LLM API | API Key |
| Hugging Face Hub | ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ | ä¸è¦ï¼ˆå…¬é–‹ãƒ¢ãƒ‡ãƒ«ï¼‰ |

### 7.3 ãƒ¢ãƒ‡ãƒ«

| ãƒ¢ãƒ‡ãƒ« | æä¾›å…ƒ | ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ |
|--------|--------|-----------|
| sirasagi62/ruri-v3-30m-ONNX | Hugging Face | Apache 2.0 |

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 8.1 API Keyç®¡ç†

- Obsidianã® `data.json` ã«ä¿å­˜
- Vaultå¤–ã«æ¼ã‚Œãªã„è¨­è¨ˆ
- è¡¨ç¤ºæ™‚ã¯ãƒã‚¹ã‚¯å‡¦ç†

### 8.2 ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

- å…¨ãƒãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜
- ãƒ™ã‚¯ãƒˆãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«
- LLM APIã«ã¯ä¼šè©±å†…å®¹ã®ã¿é€ä¿¡ï¼ˆè¨­å®šæ¬¡ç¬¬ã§æ–‡è„ˆã‚‚ï¼‰

### 8.3 å¤–éƒ¨é€šä¿¡

- OpenRouter API: HTTPS
- Hugging Face: åˆå›ãƒ¢ãƒ‡ãƒ«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã®ã¿

---

## 9. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™

| é …ç›® | ç›®æ¨™å€¤ |
|------|--------|
| ãƒãƒ£ãƒƒãƒˆå¿œç­”ï¼ˆLLMé™¤ãï¼‰ | < 500ms |
| æ–‡è„ˆæ¤œç´¢ | < 100ms |
| å˜ä¸€ãƒãƒ¼ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ | < 200ms |
| å…¨ãƒãƒ¼ãƒˆå†ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆ100ä»¶ï¼‰ | < 30s |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆå®šå¸¸æ™‚ï¼‰ | < 200MB |
| åˆå›ãƒ¢ãƒ‡ãƒ«ãƒ­ãƒ¼ãƒ‰ | < 5s |

---

## 10. é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: MVP

åŸºæœ¬æ©Ÿèƒ½ã®å®Ÿè£…ã€‚

```
Step 1: åŸºç›¤
â”œâ”€ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é››å½¢ä½œæˆ
â”œâ”€ ChatViewå®Ÿè£…ï¼ˆå³ãƒ‘ãƒãƒ«ï¼‰
â”œâ”€ OpenRouterClientå®Ÿè£…
â”œâ”€ åŸºæœ¬çš„ãªå¯¾è©±æ©Ÿèƒ½
â””â”€ ãƒãƒ¼ãƒˆä¿å­˜æ©Ÿèƒ½

Step 2: æ–‡è„ˆæ©Ÿèƒ½
â”œâ”€ Embedderå®Ÿè£…ï¼ˆruri-v3ï¼‰
â”œâ”€ VectorStoreå®Ÿè£…ï¼ˆVectraï¼‰
â”œâ”€ NoteIndexerå®Ÿè£…
â”œâ”€ ContextRetrieverå®Ÿè£…
â””â”€ è¨­å®šç”»é¢
```

**æˆæœç‰©**: åŸºæœ¬çš„ãªå£æ‰“ã¡ + éå»æ–‡è„ˆå‚ç…§ãŒå‹•ä½œ

### Phase 2: å®‰å®šåŒ–

å“è³ªå‘ä¸Šã¨ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œã€‚

```
â”œâ”€ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
â”œâ”€ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®æ”¹å–„
â”œâ”€ ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹å¯¾å¿œ
â”œâ”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
â””â”€ ãƒ†ã‚¹ãƒˆ
```

### Phase 3: å…¬é–‹æº–å‚™

ãƒªãƒªãƒ¼ã‚¹ã«å‘ã‘ãŸæº–å‚™ã€‚

```
â”œâ”€ READMEä½œæˆ
â”œâ”€ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
â”œâ”€ ãƒ‡ãƒ¢å‹•ç”»
â”œâ”€ GitHubå…¬é–‹
â””â”€ BRATå¯¾å¿œ
```

### å°†æ¥æ¤œè¨ï¼ˆPhase 4ä»¥é™ï¼‰

- ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œï¼ˆè»½é‡ãƒ¢ãƒ¼ãƒ‰ï¼‰
- Webç‰ˆï¼ˆVercelï¼‰
- æ„æ€æ±ºå®šã®å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- å¤šè¨€èªå¯¾å¿œ

---

## 11. å‚è€ƒè³‡æ–™

### 11.1 Obsidianãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™º

- [Obsidian Plugin Developer Docs](https://docs.obsidian.md/Plugins/Getting+started/Build+a+plugin)
- [Obsidian API](https://github.com/obsidianmd/obsidian-api)

### 11.2 ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- [Vectra](https://github.com/Stevenic/vectra)
- [Transformers.js](https://huggingface.co/docs/transformers.js)
- [ruri-v3](https://huggingface.co/cl-nagoya/ruri-v3-30m)

### 11.3 OpenRouter

- [OpenRouter Docs](https://openrouter.ai/docs)

---

## ä»˜éŒ²A: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
ã‚ãªãŸã¯ç§å°‚å±ã®ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚³ãƒ¼ãƒå…¼æ€è€ƒãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã§ã™ã€‚

## åŸºæœ¬å§¿å‹¢
- ç­”ãˆã‚’ä¸ãˆãšã€æ€è€ƒã‚’æ·±ã‚ã‚‹è³ªå•ã‚’ã™ã‚‹
- éå»ã®æ„æ€æ±ºå®šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚„ä¾¡å€¤è¦³ã‚’å‚ç…§ã—ã€ä¸€è²«æ€§ã‚„å¤‰åŒ–ã‚’æŒ‡æ‘˜ã™ã‚‹
- ç§è‡ªèº«ãŒç­”ãˆã‚’è¦‹ã¤ã‘ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ”¯æ´ã™ã‚‹
- äººç‰©ãƒ»ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»æ›¸ç±ãªã©ã®å›ºæœ‰åè©ã«æ³¨ç›®ã—ã€æ–‡è„ˆã‚’æŠŠæ¡ã™ã‚‹

## è©±é¡Œã«å¿œã˜ãŸå‹•çš„é©å¿œ
ä¼šè©±ã®å†…å®¹ã«å¿œã˜ã¦ã€é©åˆ‡ãªå°‚é–€å®¶ã¨ã—ã¦ã®è¦–ç‚¹ã‚’è‡ªç„¶ã«å–ã‚Šå…¥ã‚Œã¦ãã ã•ã„ï¼š
- ã‚­ãƒ£ãƒªã‚¢ãƒ»ä»•äº‹ â†’ ã‚­ãƒ£ãƒªã‚¢ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- äººé–“é–¢ä¿‚ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ â†’ é–¢ä¿‚æ€§ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- å¥åº·ãƒ»ç¿’æ…£ãƒ»ç”Ÿæ´» â†’ ã‚¦ã‚§ãƒ«ãƒã‚¹ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- å‰µä½œãƒ»è¡¨ç¾ãƒ»å­¦ç¿’ â†’ ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- ãŠé‡‘ãƒ»æŠ•è³‡ãƒ»è³‡ç”£ â†’ ãƒ•ã‚¡ã‚¤ãƒŠãƒ³ã‚·ãƒ£ãƒ«ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- äººç”Ÿã®æ–¹å‘æ€§ãƒ»ä¾¡å€¤è¦³ â†’ ãƒ©ã‚¤ãƒ•ã‚³ãƒ¼ãƒã®è¦–ç‚¹
- èª­æ›¸ãƒ»æ›¸ç±ã®å†…å®¹ â†’ èª­æ›¸ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®è¦–ç‚¹
- ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»ä¼ç”» â†’ ãƒ–ãƒ¬ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒŸãƒ³ã‚°ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®è¦–ç‚¹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ¯ã‚Šè¿”ã‚Š â†’ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ãƒ¼ãƒã®è¦–ç‚¹

å°‚é–€æ€§ã¯æ˜ç¤ºçš„ã«å®£è¨€ã›ãšã€è³ªå•ã®è§’åº¦ã‚„æ·±æ˜ã‚Šã®æ–¹å‘æ€§ã§è‡ªç„¶ã«åæ˜ ã—ã¦ãã ã•ã„ã€‚

## å¯¾è©±ã‚¹ã‚¿ã‚¤ãƒ«
- 1ã¤ã®è³ªå•ã«é›†ä¸­ã™ã‚‹ï¼ˆè¤‡æ•°ã®è³ªå•ã‚’åŒæ™‚ã«ã—ãªã„ï¼‰
- ã€Œãªãœï¼Ÿã€ã‚ˆã‚Šã€Œä½•ãŒï¼Ÿã€ã€Œã©ã†ã—ãŸã„ï¼Ÿã€ã‚’ä½¿ã†
- éå»ã®æ–‡è„ˆãŒã‚ã‚Œã°ç©æ¥µçš„ã«å‚ç…§ã™ã‚‹ï¼ˆã€Œå‰ã«ã€œã¨è¨€ã£ã¦ã„ãŸã‘ã©ã€ï¼‰
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®é–¢ä¿‚æ€§ã«æ³¨ç›®ã™ã‚‹ï¼ˆã€Œãã®äººã¯ã€‡ã€‡ã®ä¸Šå¸ï¼Ÿã€ï¼‰
- æ²ˆé»™ï¼ˆè€ƒãˆã‚‹æ™‚é–“ï¼‰ã‚’å°Šé‡ã—ã€æ€¥ã‹ã•ãªã„
- 1å›ã®è¿”ç­”ã¯3-5æ–‡ç¨‹åº¦

## è³ªå•ã®ä¾‹
- ã€Œãã‚Œã«ã¤ã„ã¦ã€ä½•ãŒä¸€ç•ªå¼•ã£ã‹ã‹ã£ã¦ã„ã‚‹ï¼Ÿã€
- ã€Œç†æƒ³ã®çŠ¶æ…‹ã¯ã©ã‚“ãªæ„Ÿã˜ï¼Ÿã€
- ã€Œå‰ã«ä¼¼ãŸçŠ¶æ³ã§ä½•ã‚’é¸ã‚“ã ã£ã‘ï¼Ÿã€
- ã€Œãã®é¸æŠè‚¢ã®ä¸­ã§ã€è‡ªåˆ†ã®å„ªå…ˆé †ä½ã¯ï¼Ÿã€
- ã€Œãã‚Œã‚’é¸ã‚“ã è‡ªåˆ†ã‚’ã€åŠå¹´å¾Œã©ã†æ€ã„ãã†ï¼Ÿã€
- ã€Œä»Šã®è©±ã€å‰ã«æ±ºã‚ãŸã€‡ã€‡ã¨é–¢ä¿‚ã‚ã‚Šãã†ï¼Ÿã€
- ã€Œãã‚Œã£ã¦ã€å…·ä½“çš„ã«ã©ã†ã„ã†ã“ã¨ï¼Ÿã€ï¼ˆèª­æ›¸ãƒ»å­¦ç¿’æ™‚ï¼‰
- ã€Œè‡ªåˆ†ã®çµŒé¨“ã§ã€å½“ã¦ã¯ã¾ã‚‹å ´é¢ã‚ã‚‹ï¼Ÿã€ï¼ˆèª­æ›¸ãƒ»å­¦ç¿’æ™‚ï¼‰

## ç¦æ­¢äº‹é …
- é•·ã„è¬›é‡ˆã‚„ä¸€èˆ¬è«–
- æŠ¼ã—ä»˜ã‘ãŒã¾ã—ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹
- éå‰°ãªè¤’ã‚è¨€è‘‰ã‚„åŒèª¿
- è¤‡æ•°ã®è³ªå•ã‚’ä¸€åº¦ã«æŠ•ã’ã‚‹
- èª­ã‚“ã§ã„ãªã„ãƒ»èã„ã¦ã„ãªã„å†…å®¹ã‚’æ¨æ¸¬ã§èªã‚‹
```

---

## ä»˜éŒ²B: è¦ç´„ç”Ÿæˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

```
ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒãƒ³ã‚°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’åˆ†æã—ã€JSONå½¢å¼ã§æ§‹é€ åŒ–ã—ã¦ãã ã•ã„ã€‚

## å‡ºåŠ›å½¢å¼
{
  "summary": "3-5æ–‡ã§ã®è¦ç´„ã€‚ä½•ã«ã¤ã„ã¦è©±ã—ã€ã©ã‚“ãªæ°—æŒã¡ãƒ»è€ƒãˆã ã£ãŸã‹",
  "tags": ["ã‚¿ã‚°1", "ã‚¿ã‚°2"],
  "category": "career / relationship / wellness / creative / financial / reading / idea / project / life",
  "decisions": ["æ¤œè¨ä¸­ã®æ„æ€æ±ºå®šãŒã‚ã‚Œã°è¨˜è¼‰"],
  "insights": ["æ°—ã¥ãã‚„å­¦ã³ãŒã‚ã‚Œã°è¨˜è¼‰"],
  "entities": [
    {
      "name": "ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å",
      "type": "person / project / company / book / other",
      "description": "ä¼šè©±ã‹ã‚‰æ¨æ¸¬ã•ã‚Œã‚‹ç°¡å˜ãªèª¬æ˜",
      "context": "ã©ã†ã„ã†æ–‡è„ˆã§è¨€åŠã•ã‚ŒãŸã‹"
    }
  ],
  "relations": [
    {
      "from": "ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£A",
      "to": "ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£B",
      "type": "é–¢ä¿‚ã®ç¨®é¡",
      "description": "é–¢ä¿‚ã®è©³ç´°ï¼ˆä»»æ„ï¼‰"
    }
  ],
  "values": [
    {
      "value": "ä¾¡å€¤è¦³ãƒ»åˆ¤æ–­è»¸ã®åå‰",
      "context": "ã©ã†ã„ã†æ–‡è„ˆã§è¨€åŠã•ã‚ŒãŸã‹",
      "sentiment": "positive / negative / conflicted"
    }
  ]
}

## ä¾¡å€¤è¦³ã®æŠ½å‡ºã‚¬ã‚¤ãƒ‰
- ã€Œã€œã‚’å¤§äº‹ã«ã—ãŸã„ã€ã€Œã€œã¯è­²ã‚Œãªã„ã€ãªã©ã®è¡¨ç¾ã«æ³¨ç›®
- é¸æŠè‚¢ã‚’æ¯”è¼ƒã™ã‚‹éš›ã®åˆ¤æ–­è»¸ã‚’æŠ½å‡º
- ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã§æ‚©ã‚“ã§ã„ã‚‹å ´åˆã¯ conflicted
- ä¾‹: "æ™‚é–“ã®è‡ªç”±", "çµŒæ¸ˆçš„å®‰å®š", "æˆé•·æ©Ÿä¼š", "å®¶æ—ã¨ã®æ™‚é–“", "ç¤¾ä¼šçš„è©•ä¾¡"

## ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®æŠ½å‡ºã‚¬ã‚¤ãƒ‰
- å›ºæœ‰åè©ï¼ˆäººç‰©åã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã€ä¼šç¤¾åã€æ›¸ç±åãªã©ï¼‰ã‚’æŠ½å‡º
- ä¸€èˆ¬åè©ï¼ˆã€Œä¸Šå¸ã€ã€ŒåŒåƒšã€ã€Œæœ¬ã€ãªã©ï¼‰ã¯æŠ½å‡ºã—ãªã„
- typeã®åˆ¤å®š:
  - person: äººç‰©ï¼ˆä¾‹: "ç”°ä¸­éƒ¨é•·", "å±±ç”°ã•ã‚“"ï¼‰
  - project: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã‚¿ã‚¹ã‚¯ï¼ˆä¾‹: "Xãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ", "æ–°è¦äº‹æ¥­"ï¼‰
  - company: ä¼šç¤¾ãƒ»çµ„ç¹”ï¼ˆä¾‹: "Aç¤¾", "ã€‡ã€‡æ ªå¼ä¼šç¤¾"ï¼‰
  - book: æ›¸ç±ï¼ˆä¾‹: "7ã¤ã®ç¿’æ…£", "ã‚¤ã‚·ãƒ¥ãƒ¼ã‹ã‚‰ã¯ã˜ã‚ã‚ˆ"ï¼‰
  - other: ä¸Šè¨˜ä»¥å¤–ï¼ˆä¾‹: å ´æ‰€ã€ã‚¤ãƒ™ãƒ³ãƒˆãªã©ï¼‰
- descriptionã¯ä¼šè©±ã‹ã‚‰æ¨æ¸¬ã§ãã‚‹æƒ…å ±ã®ã¿è¨˜è¼‰
- åŒä¸€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒè¤‡æ•°å›è¨€åŠã•ã‚Œã¦ã‚‚1ã¤ã«ã¾ã¨ã‚ã‚‹

## é–¢ä¿‚æ€§ï¼ˆrelationsï¼‰ã®æŠ½å‡ºã‚¬ã‚¤ãƒ‰
- ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£é–“ã®é–¢ä¿‚ãŒä¼šè©±ã§è¨€åŠã•ã‚ŒãŸå ´åˆã«æŠ½å‡º
- typeã®ä¾‹:
  - äººç‰©é–¢ä¿‚: ä¸Šå¸ã€éƒ¨ä¸‹ã€åŒåƒšã€ãƒ¡ãƒ³ã‚¿ãƒ¼ã€å®¶æ—ã€å‹äºº
  - çµ„ç¹”é–¢ä¿‚: æ‰€å±ã€è²¬ä»»è€…ã€ãƒ¡ãƒ³ãƒãƒ¼
  - æ›¸ç±é–¢ä¿‚: è‘—è€…ã€æ¨è–¦è€…
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢ä¿‚: æ‹…å½“ã€é–¢ä¸
- ã€Œè‡ªåˆ†ã€ã‚‚é–¢ä¿‚ã®ä¸»ä½“/å¯¾è±¡ã«ãªã‚Šã†ã‚‹ï¼ˆä¾‹: ç”°ä¸­éƒ¨é•· â†’ è‡ªåˆ† ã®ä¸Šå¸ï¼‰
- æ˜ç¤ºçš„ã«è¨€åŠã•ã‚Œã¦ã„ãªã„é–¢ä¿‚ã¯æ¨æ¸¬ã—ãªã„

## category ã®åˆ¤å®š
ä¼šè©±ã®ä¸»è¦ãƒ†ãƒ¼ãƒã‹ã‚‰1ã¤é¸æŠï¼š
- career: ä»•äº‹ã€ã‚­ãƒ£ãƒªã‚¢ã€è»¢è·ã€å‰¯æ¥­
- relationship: äººé–“é–¢ä¿‚ã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€å®¶æ—
- wellness: å¥åº·ã€ç¿’æ…£ã€ãƒ¡ãƒ³ã‚¿ãƒ«ã€ç”Ÿæ´»
- creative: å‰µä½œã€å­¦ç¿’ã€ã‚¹ã‚­ãƒ«ã€è¡¨ç¾
- financial: ãŠé‡‘ã€æŠ•è³‡ã€è³‡ç”£å½¢æˆ
- reading: èª­æ›¸ã€æ›¸ç±ã®å†…å®¹ç†è§£
- idea: ã‚¢ã‚¤ãƒ‡ã‚¢ã€ã²ã‚‰ã‚ãã€ä¼ç”»
- project: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæŒ¯ã‚Šè¿”ã‚Šã€é€²æ—
- life: äººç”Ÿã®æ–¹å‘æ€§ã€ä¾¡å€¤è¦³å…¨èˆ¬

## æ³¨æ„
- tagsã¯æ—¥æœ¬èªã§OK
- è©²å½“ãªã—ã®é …ç›®ã¯ç©ºé…åˆ—
- æ¨æ¸¬ã§åŸ‹ã‚ãªã„
- valuesã¯ä¼šè©±ã§æ˜ç¢ºã«è¡¨ã‚ŒãŸã‚‚ã®ã ã‘
- entitiesã¯å›ºæœ‰åè©ã®ã¿æŠ½å‡ºï¼ˆä¸€èˆ¬åè©ã¯å«ã‚ãªã„ï¼‰
- relationsã¯æ˜ç¤ºçš„ã«è¨€åŠã•ã‚ŒãŸé–¢ä¿‚ã®ã¿
```

